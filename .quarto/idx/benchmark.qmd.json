{"markdown":{"yaml":{"title":"","format":{"html":{"toc":true,"theme":{"light":"cosmo","dark":"darkly"},"code-fold":true}},"jupyter":"python3"},"containsRefs":false,"markdown":"\n\n<h3 style=\"color:#004080; margin-top: 1.5em;\">Introduction:</h3>\n\n<section>\n  <p>\n    This section aims to demonstrate that with the simulation method developed at <strong style=\"color:#004080;\">UBM</strong>, \n    type I and type II errors are properly controlled. A <strong style=\"color:#004080;\">benchmarking</strong> analysis is presented to compare the statistical significance of test results at a fixed power of <strong>80%</strong>, based on different methods for the *Binomial confidence interval* estimation.\n  </p>\n</section>\n\n> Method can be:\n>\n> - [Wilson](https://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval#Wilson_score_interval)\n> \n> - [Beta](https://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval#Clopper%E2%80%93Pearson_interval)\n> \n> - [Normal](https://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval#Problems_with_using_a_normal_approximation_or_%22Wald_interval%22)\n> \n> - [Arcsinus](https://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval#Arcsine_transformation)\n>\n\n<h3 style=\"color:#004080; margin-top: 1.5em;\">Statement:</h3>\n\n<p>**The demonstration is based on the following scenario:**</p>\n\n  <p>\n    An experimental treatment (<strong>TR1</strong>) will be considered effective if at least <strong>70%</strong> of patients achieve a complete response at 2 years.<br>\n    According to the literature, an <strong>80%</strong> complete response rate is expected. Moreover, we suppose that patient distribution follow a *Binomial low*.\n\n    **Objective:** Determine an optimal sample size which respect all clinical recommendation (significativity and exposure criterion). To realise this objective We start with 200 patients and we research to decrease this cohort size.\n  </p>\n  <p>\n    In first part we proof that we control the alpha risk at <strong>5%</strong> and beta risk (via <strong>80%</strong> power) using a cohort of <strong>200 patients</strong>.\n  </p>\n  <p>\n    In second part, we using a method  to determine a  <strong>sample size</strong> for a clinical trial with different methods.\n  </p>\n\n```{python}\n#| echo: false   \n#| output: false \n#| warning: false \n#| error: false   \nfrom script.simulations import *\nfrom script.generate_graph_simulations import *\n\nalpha = 0.05\npower = 0.8\nepsilon_H0 = 0.7\nepsilon_H1 = 0.8\nH0 = 0.7\ncohort_size_start = 200\ncohort_size_end = 10\nnum_simu = 1000\n\ndata_simu_normal_10000 = monte_carlo_process_binomial(cohort_size_start, cohort_size_end, num_simu, epsilon_H0, epsilon_H1, H0, alpha, power, \"normal\")\ndata_simu_beta_10000 = monte_carlo_process_binomial(cohort_size_start, cohort_size_end, num_simu, epsilon_H0, epsilon_H1, H0, alpha, power, \"beta\")\ndata_simu_wilson_10000 = monte_carlo_process_binomial(cohort_size_start, cohort_size_end, num_simu, epsilon_H0, epsilon_H1, H0, alpha, power, \"wilson\")\ndata_simu_arcsinus_10000 = monte_carlo_process_binomial(cohort_size_start, cohort_size_end, num_simu, epsilon_H0, epsilon_H1, H0, alpha, power, \"arcsinus\")\ndata_simulation = pd.concat([data_simu_normal_10000, data_simu_beta_10000, data_simu_wilson_10000, data_simu_arcsinus_10000], axis=0,ignore_index=True)\n```\n\n\n<h3 style=\"color:#004080; margin-top: 1.5em;\">$\\alpha$-evolution in function of cohort size</h3>\n \nTo evaluate the $\\alpha$-evolution in function of cohort size, we use following parameter:\n\n- $\\alpha$ = 0.05\n- $1 - \\beta$ = 0.8\n- Hypothesis under H0 = 0.7\n- Hypothesis under H1 = 0.8\n- H0 = 0.7\n- Maximal cohort size = 200\n- Minimal cohort size = 10\n- Number of simulation = 1000\n\n\n```{python}\n#| echo: true   \n#| output: true \n#| warning: false \n#| error: false \nimport plotly.express as px\n\nfig = px.line(data_simulation, x=\"size\", y=\"alpha\", color='method')\nfig.add_hline(y=0.05, line_dash=\"dash\", line_color=\"red\")\nfig.show()\n```\n\n<h3 style=\"color:#004080; margin-top: 1.5em;\">$\\beta$-evolution in function of cohort size</h3>\n\nTo evaluate the $\\alpha$-evolution in function of cohort size, we use following parameter:\n\n- $\\alpha$ = 0.05\n- $1 - \\beta$ = 0.8\n- Hypothesis under H0 = 0.7\n- Hypothesis under H1 = 0.8\n- H0 = 0.7\n- Maximal cohort size = 200\n- Minimal cohort size = 10\n- Number of simulation = 1000\n\n```{python}\n#| echo: True   \n#| output: True \n#| warning: false \n#| error: false \nimport plotly.express as px\n\nfig = px.line(data_simulation, x=\"size\", y=\"power\", color='method')\nfig.add_hline(y=0.8, line_dash=\"dash\", line_color=\"red\")\nfig.show()\n```\n\n<h3 style=\"color:#004080; margin-top: 1.5em;\">MSE scores evolution</h3>\n\n```{python}\n#| echo: True   \n#| output: True \n#| warning: false \n#| error: false \nimport plotly.express as px\n\nfig = px.line(data_simu_normal_10000, x=\"size\", y=\"mse_alpha\", color='method')\nfig.show()\n```\n\n```{python}\n#| echo: True   \n#| output: True \n#| warning: false \n#| error: false \nimport plotly.express as px\n\nfig = px.line(data_simu_wilson_10000, x=\"size\", y=\"mse_alpha\", color='method')\nfig.show()\n```\n\n```{python}\n#| echo: True   \n#| output: True \n#| warning: false \n#| error: false \nimport plotly.express as px\n\nfig = px.line(data_simu_beta_10000, x=\"size\", y=\"mse_alpha\", color='method')\nfig.show()\n```\n\n```{python}\n#| echo: True   \n#| output: True \n#| warning: false \n#| error: false \nimport plotly.express as px\n\nfig = px.line(data_simu_arcsinus_10000, x=\"size\", y=\"mse_alpha\", color='method')\nfig.show()\n```\n\n<h3 style=\"color:#004080; margin-top: 1.5em;\">Conclusion</h3>\n\nFrom these results, we observe that all methods converge, but the arcsine transformation provides an optimal balance between statistical power and control of the type I error ($\\alpha$). Furthermore, the MSE scores indicate that the calculations based on theoretical formulas and simulations are very close.\n\nBased on this study, if the arcsine transformation is used, <span style=\"color: red;\">a suitable sample size would be 119</span> ($\\alpha$ around $0.05$ and a power greater than $0.8$).","srcMarkdownNoYaml":"\n\n<h3 style=\"color:#004080; margin-top: 1.5em;\">Introduction:</h3>\n\n<section>\n  <p>\n    This section aims to demonstrate that with the simulation method developed at <strong style=\"color:#004080;\">UBM</strong>, \n    type I and type II errors are properly controlled. A <strong style=\"color:#004080;\">benchmarking</strong> analysis is presented to compare the statistical significance of test results at a fixed power of <strong>80%</strong>, based on different methods for the *Binomial confidence interval* estimation.\n  </p>\n</section>\n\n> Method can be:\n>\n> - [Wilson](https://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval#Wilson_score_interval)\n> \n> - [Beta](https://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval#Clopper%E2%80%93Pearson_interval)\n> \n> - [Normal](https://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval#Problems_with_using_a_normal_approximation_or_%22Wald_interval%22)\n> \n> - [Arcsinus](https://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval#Arcsine_transformation)\n>\n\n<h3 style=\"color:#004080; margin-top: 1.5em;\">Statement:</h3>\n\n<p>**The demonstration is based on the following scenario:**</p>\n\n  <p>\n    An experimental treatment (<strong>TR1</strong>) will be considered effective if at least <strong>70%</strong> of patients achieve a complete response at 2 years.<br>\n    According to the literature, an <strong>80%</strong> complete response rate is expected. Moreover, we suppose that patient distribution follow a *Binomial low*.\n\n    **Objective:** Determine an optimal sample size which respect all clinical recommendation (significativity and exposure criterion). To realise this objective We start with 200 patients and we research to decrease this cohort size.\n  </p>\n  <p>\n    In first part we proof that we control the alpha risk at <strong>5%</strong> and beta risk (via <strong>80%</strong> power) using a cohort of <strong>200 patients</strong>.\n  </p>\n  <p>\n    In second part, we using a method  to determine a  <strong>sample size</strong> for a clinical trial with different methods.\n  </p>\n\n```{python}\n#| echo: false   \n#| output: false \n#| warning: false \n#| error: false   \nfrom script.simulations import *\nfrom script.generate_graph_simulations import *\n\nalpha = 0.05\npower = 0.8\nepsilon_H0 = 0.7\nepsilon_H1 = 0.8\nH0 = 0.7\ncohort_size_start = 200\ncohort_size_end = 10\nnum_simu = 1000\n\ndata_simu_normal_10000 = monte_carlo_process_binomial(cohort_size_start, cohort_size_end, num_simu, epsilon_H0, epsilon_H1, H0, alpha, power, \"normal\")\ndata_simu_beta_10000 = monte_carlo_process_binomial(cohort_size_start, cohort_size_end, num_simu, epsilon_H0, epsilon_H1, H0, alpha, power, \"beta\")\ndata_simu_wilson_10000 = monte_carlo_process_binomial(cohort_size_start, cohort_size_end, num_simu, epsilon_H0, epsilon_H1, H0, alpha, power, \"wilson\")\ndata_simu_arcsinus_10000 = monte_carlo_process_binomial(cohort_size_start, cohort_size_end, num_simu, epsilon_H0, epsilon_H1, H0, alpha, power, \"arcsinus\")\ndata_simulation = pd.concat([data_simu_normal_10000, data_simu_beta_10000, data_simu_wilson_10000, data_simu_arcsinus_10000], axis=0,ignore_index=True)\n```\n\n\n<h3 style=\"color:#004080; margin-top: 1.5em;\">$\\alpha$-evolution in function of cohort size</h3>\n \nTo evaluate the $\\alpha$-evolution in function of cohort size, we use following parameter:\n\n- $\\alpha$ = 0.05\n- $1 - \\beta$ = 0.8\n- Hypothesis under H0 = 0.7\n- Hypothesis under H1 = 0.8\n- H0 = 0.7\n- Maximal cohort size = 200\n- Minimal cohort size = 10\n- Number of simulation = 1000\n\n\n```{python}\n#| echo: true   \n#| output: true \n#| warning: false \n#| error: false \nimport plotly.express as px\n\nfig = px.line(data_simulation, x=\"size\", y=\"alpha\", color='method')\nfig.add_hline(y=0.05, line_dash=\"dash\", line_color=\"red\")\nfig.show()\n```\n\n<h3 style=\"color:#004080; margin-top: 1.5em;\">$\\beta$-evolution in function of cohort size</h3>\n\nTo evaluate the $\\alpha$-evolution in function of cohort size, we use following parameter:\n\n- $\\alpha$ = 0.05\n- $1 - \\beta$ = 0.8\n- Hypothesis under H0 = 0.7\n- Hypothesis under H1 = 0.8\n- H0 = 0.7\n- Maximal cohort size = 200\n- Minimal cohort size = 10\n- Number of simulation = 1000\n\n```{python}\n#| echo: True   \n#| output: True \n#| warning: false \n#| error: false \nimport plotly.express as px\n\nfig = px.line(data_simulation, x=\"size\", y=\"power\", color='method')\nfig.add_hline(y=0.8, line_dash=\"dash\", line_color=\"red\")\nfig.show()\n```\n\n<h3 style=\"color:#004080; margin-top: 1.5em;\">MSE scores evolution</h3>\n\n```{python}\n#| echo: True   \n#| output: True \n#| warning: false \n#| error: false \nimport plotly.express as px\n\nfig = px.line(data_simu_normal_10000, x=\"size\", y=\"mse_alpha\", color='method')\nfig.show()\n```\n\n```{python}\n#| echo: True   \n#| output: True \n#| warning: false \n#| error: false \nimport plotly.express as px\n\nfig = px.line(data_simu_wilson_10000, x=\"size\", y=\"mse_alpha\", color='method')\nfig.show()\n```\n\n```{python}\n#| echo: True   \n#| output: True \n#| warning: false \n#| error: false \nimport plotly.express as px\n\nfig = px.line(data_simu_beta_10000, x=\"size\", y=\"mse_alpha\", color='method')\nfig.show()\n```\n\n```{python}\n#| echo: True   \n#| output: True \n#| warning: false \n#| error: false \nimport plotly.express as px\n\nfig = px.line(data_simu_arcsinus_10000, x=\"size\", y=\"mse_alpha\", color='method')\nfig.show()\n```\n\n<h3 style=\"color:#004080; margin-top: 1.5em;\">Conclusion</h3>\n\nFrom these results, we observe that all methods converge, but the arcsine transformation provides an optimal balance between statistical power and control of the type I error ($\\alpha$). Furthermore, the MSE scores indicate that the calculations based on theoretical formulas and simulations are very close.\n\nBased on this study, if the arcsine transformation is used, <span style=\"color: red;\">a suitable sample size would be 119</span> ($\\alpha$ around $0.05$ and a power greater than $0.8$)."},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"output-file":"benchmark.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.57","theme":{"light":"cosmo","dark":"darkly"},"toc-title":"Contents","toc-location":"left","title":"","jupyter":"python3"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}